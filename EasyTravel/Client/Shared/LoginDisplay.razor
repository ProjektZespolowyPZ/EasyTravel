@inject NavigationManager Navigation
@inject SignOutSessionStateManager SignOutManager
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject HttpClient Http
<AuthorizeView>
   
    <Authorized Context="Auth">
       
          
            <MudDivider Class="logo"></MudDivider><MudButton Variant="Variant.Text" @onclick="GoToMainPage" Style="color: white; font-size:28px;" >Logo</MudButton>
                <div class="search">
                <EditForm Model="@enterSearchingWord" OnValidSubmit="@Search">
                    <InputText placeholder="Znajdź wycieczkę" @bind-Value="@enterSearchingWord.Word" style="width: 500px;padding: 6px;margin-top: 3px;margin-left: 15px;font-size: 17px;border: thick;" />
                    <button type="submit"><i class="fa fa-search"></i></button>
                </EditForm>
                </div>
        
                <MudButton Variant="Variant.Text" @onclick="BeginSignOut" Style="color: white; margin-left: 20vw; padding: 1%;"  >Wyloguj</MudButton>
        <MudButton Variant="Variant.Text" Style="color: white; padding: 1%">O nas</MudButton>
        <MudButton Variant="Variant.Text" Style="color: white; padding: 1%">Kontakt</MudButton>
                <ol>
                    <li><a>Mój Profil</a>
                        <ul>
                            <li><a href="/users/GetUserInformation">Pokaż profil</a></li>
                            <li><a href="/users/GetUserTours">Moje wycieczki</a></li>      
                        </ul>
                    </li>
                </ol>
        
      
    </Authorized>
    
    <NotAuthorized>

        <MudDivider Class="logo"></MudDivider><MudButton Variant="Variant.Text" @onclick="GoToMainPage" Style="color: white; font-size:28px;">Logo</MudButton>
        <MudButton Variant="Variant.Text"  Style="color: white;  margin-left: 20vw;padding: 1%">O nas</MudButton>
        <MudButton Variant="Variant.Text"  Style="color: white; padding: 1%">Kontakt</MudButton>
        <a href="authentication/login" class="login">Zaloguj</a>
    </NotAuthorized>
</AuthorizeView>

@code {

    bool _isExpanded = true;

    private UserInformationVm user;

    public EnterSearchingWord enterSearchingWord { get; set; } = new EnterSearchingWord();

    public string TextValue { get; set; }

    private async Task BeginSignOut(MouseEventArgs args)
    {
        await SignOutManager.SetSignOutState();
        Navigation.NavigateTo("authentication/logout");
    }

    private void GoToMainPage()
    {
        enterSearchingWord.Word = "";
        Navigation.NavigateTo("/");
    }

    private void Search()
    {
        Navigation.NavigateTo($"/searching/{enterSearchingWord.Word}");
    }

}
